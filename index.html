<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>NPN</title>
    <link rel="stylesheet" href="css/master.css">
    <script src="js/jquery-3.0.0.min.js"></script>
    <script src="js/seen.min.js"></script>
    <script src="js/coffee-script.min.js"></script>
    <script src="js/script.js"></script>
  </head>
  <body>
  <h1>Næstved Net Party</h1>
<div id="clockdiv">
  <div>
    <span class="months"></span>
    <div class="smalltext">Måneder</div>
  </div>
  <div>
    <span class="days"></span>
    <div class="smalltext">Dage</div>
  </div>
  <div>
    <span class="hours"></span>
    <div class="smalltext">Timer</div>
  </div>
  <div>
    <span class="minutes"></span>
    <div class="smalltext">Minutter</div>
  </div>
  <div>
    <span class="seconds"></span>
    <div class="smalltext">Sekunder</div>
  </div>
</div>
<canvas width="1920" height="1080" id="seen-canvas"></canvas>

<script type="text/coffeescript">
width               = 1920
height              = 1080
equilateralAltitude = Math.sqrt(3.0) / 2.0
triangleScale       = 70
patch_width         = width * 1.5
patch_height        = height * 1.5

# Create patch of triangles that spans the view
shape = seen.Shapes.patch(
 patch_width / triangleScale / equilateralAltitude
 patch_height / triangleScale
)
.scale(triangleScale)
.translate(-patch_width/2, -patch_height/2 + 80)
.rotx(-0.3)
seen.Colors.randomSurfaces2(shape)

# Create scene and render context
scene = new seen.Scene
 model    : seen.Models.default().add(shape)
 viewport : seen.Viewports.center(width, height)

context = seen.Context('seen-canvas', scene).render()

# Apply animated 3D simplex noise to patch vertices
t = 0
noiser = new seen.Simplex3D(shape)
context.animate()
 .onBefore((t)->
   for surf in shape.surfaces
     for p in surf.points
       p.z = 4*noiser.noise(p.x/8, p.y/8, t*1e-4)
     # Since we're modifying the point directly, we need to mark the surface dirty
     # to make sure the cache doesn't ignore the change
     surf.dirty = true
 )
 .start()
</script>
  </body>
</html>
